{"version":3,"file":"index.js","sources":["../src/img/sprite.svg","../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__0pJmlING__\"","import axios from 'axios';\n\nconst API_KEY = '52315817-6546dbd007993710b423406a2';\n\nexport async function getImagesByQuery(query, page = 1) {\n  const { data } = await axios('https://pixabay.com/api/', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n  return data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loaderEl = document.querySelector('.loader');\nexport const loadBtnEl = document.querySelector('.load-btn');\n\nexport function createGallery(container, images) {\n  const markup = [...images]\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${largeImageURL}\"><img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" /></a>\n    <ul class=\"content-list\">\n    <li class=\"content-item\">\n    <h3 class=\"content-header\">Likes</h3>\n    <p class=\"content-value\">${likes}</p> \n    </li>\n    <li class=\"content-item\">\n    <h3 class=\"content-header\">Views</h3>\n    <p class=\"content-value\">${views}</p>\n    </li>\n    <li class=\"content-item\">\n    <h3 class=\"content-header\">Comments</h3>\n    <p class=\"content-value\">${comments}</p>\n    </li>\n    <li class=\"content-item\">\n    <h3 class=\"content-header\">Downloads</h3>\n    <p class=\"content-value\">${downloads}</p>\n    </li>\n    </ul>\n    </li>\n`\n    )\n    .join('');\n\n  container.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function clearGallery(container) {\n  container.innerHTML = '';\n}\n\nexport function showLoader() {\n  loaderEl.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  loaderEl.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadBtnEl.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadBtnEl.classList.add('is-hidden');\n}\n","import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport './css/iziToast-custom.css';\nimport spriteUrl from './img/sprite.svg';\n\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  loadBtnEl,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst formEl = document.querySelector('.form');\nconst inputEl = document.querySelector('input');\nconst galleryEl = document.querySelector('.gallery');\n\nformEl.addEventListener('submit', handleSubmit);\nloadBtnEl.addEventListener('click', onLoadMore);\n\nlet inputValue = null;\nlet page = 1;\nlet loadedImages = 0;\n\nasync function handleSubmit(event) {\n  event.preventDefault();\n  clearGallery(galleryEl);\n  hideLoadMoreButton();\n\n  inputValue = inputEl.value.trim();\n  if (!inputValue) {\n    const iziToastErrorEmpty = { ...iziToastError };\n    iziToastErrorEmpty.message = 'Please enter your search query';\n    iziToast.error(iziToastErrorEmpty);\n\n    return;\n  }\n  showLoader();\n  galleryEl.style.opacity = '0';\n\n  try {\n    page = 1;\n    const { hits, totalHits } = await getImagesByQuery(inputValue, page);\n    loadedImages = hits.length;\n    if (hits.length === 0) {\n      iziToast.error(iziToastError);\n      return;\n    } else {\n      createGallery(galleryEl, hits);\n      galleryEl.style.opacity = '1';\n      if (totalHits > loadedImages) {\n        showLoadMoreButton();\n      }\n    }\n  } catch (error) {\n    iziToastErrorCatch(error);\n  } finally {\n    hideLoader();\n    event.target.reset();\n  }\n}\n\nasync function onLoadMore() {\n  loadBtnEl.disabled = true;\n  showLoader();\n  try {\n    page += 1;\n    const { hits, totalHits } = await getImagesByQuery(inputValue, page);\n    loadedImages += hits.length;\n    createGallery(galleryEl, hits);\n    scrollGallery();\n    if (loadedImages >= totalHits) {\n      const iziToastWarning = { ...iziToastError };\n      iziToastWarning.message =\n        \"We're sorry, but you've reached the end of search results.\";\n      iziToastWarning.backgroundColor = '#859ceeff';\n      iziToast.error(iziToastWarning);\n      hideLoadMoreButton();\n    }\n  } catch (error) {\n    iziToastErrorCatch(error);\n  } finally {\n    hideLoader();\n    loadBtnEl.disabled = false;\n  }\n}\n\nfunction scrollGallery() {\n  const cardEl = document.querySelector('.gallery-item');\n  const cardHeight = cardEl.getBoundingClientRect().height;\n  window.scrollBy({\n    top: cardHeight * 2,\n    left: 0,\n    behavior: 'smooth',\n  });\n}\n\nfunction iziToastErrorCatch(error) {\n  const errorCatch = { ...iziToastError };\n  errorCatch.message = error.message;\n  iziToast.error(errorCatch);\n}\n\nconst iziToastError = {\n  message:\n    'Sorry, there are no images matching your search query. Please try again!',\n  position: 'topRight',\n  backgroundColor: ' #ef4040',\n  titleColor: '#fff',\n  messageColor: '#fff',\n  icon: ' ',\n  close: false,\n  maxWidth: 435,\n  class: 'custom-toast',\n  onOpening: function (instance, toast) {\n    const iconEl = toast.querySelector('.iziToast-icon');\n    if (iconEl) {\n      iconEl.innerHTML = `\n    <svg class=\"icon-custom\">\n      <use href=\"${spriteUrl}#icon-bi_x-octagon\"></use>\n    </svg>`;\n    }\n\n    const customClose = document.createElement('button');\n    customClose.classList.add('iziToast-close-custom');\n    customClose.innerHTML = `\n    <svg class=\"icon-custom-close\">\n      <use href=\"${spriteUrl}#icon-Vector-3\"></use>\n    </svg>`;\n    customClose.addEventListener('click', () => {\n      iziToast.hide({}, toast);\n    });\n    toast.appendChild(customClose);\n  },\n};\n"],"names":["spriteUrl","API_KEY","getImagesByQuery","query","page","data","axios","lightbox","SimpleLightbox","loaderEl","loadBtnEl","createGallery","container","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formEl","inputEl","galleryEl","handleSubmit","onLoadMore","inputValue","loadedImages","event","iziToastErrorEmpty","iziToastError","iziToast","hits","totalHits","error","iziToastErrorCatch","scrollGallery","iziToastWarning","cardHeight","errorCatch","instance","toast","iconEl","customClose"],"mappings":"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"}